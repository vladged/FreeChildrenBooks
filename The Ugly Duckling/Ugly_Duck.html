
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>The Three Little Pigs ‚Äî Picture‚ÄëBook</title>
  <meta name="keywords" content="Free Children Books, The Three Little Pigs, Picture Book, Kids Story, Fairy Tale">
  <meta name="description"
    content="Read The Three Little Pigs online. Free Children Books. Illustrated picture book for kids.">
  <!-- ...existing code... -->
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&family=Source+Sans+3:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#fff;--fg:#111;--muted:#6b7280;--card:#fff;--shadow:0 10px 30px rgba(0,0,0,.08)}
    html.dark{--bg:#0b0f19;--fg:#f3f4f6;--muted:#9ca3af;--card:#0e1524;--shadow:0 10px 30px rgba(0,0,0,.4)}
    body{margin:0;background:var(--bg);color:var(--fg);font-family:'Source Sans 3',system-ui,sans-serif}
    .wrap{max-width:960px;margin:0 auto;padding:24px}
    header.top{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
    h1.title{font-family:'Quicksand',system-ui,sans-serif;font-weight:800;letter-spacing:.2px;margin:0;font-size:clamp(22px,2.4vw,32px)}
    .controls{display:flex;gap:8px;flex-wrap:wrap}
    button{appearance:none;border:1px solid rgba(0,0,0,.1);background:var(--card);color:var(--fg);padding:10px 14px;border-radius:12px;box-shadow:var(--shadow);cursor:pointer}
    button[disabled]{opacity:.5;cursor:not-allowed}
    .card{background:var(--card);padding:28px;border-radius:18px;box-shadow:var(--shadow)}
    h2.page{font-family:'Quicksand',system-ui,sans-serif;margin:0 0 8px 0;font-size:clamp(20px,2.2vw,28px)}
    p{text-wrap:pretty;line-height:1.8;font-size:clamp(17px,2vw,20px);margin:.5rem 0;white-space:pre-line}
  .imgwrap{margin:8px 0 14px 0;text-align:center}
  .imgwrap img{max-width:100%;height:auto;max-height:80vh;object-fit:contain;border-radius:14px;box-shadow:var(--shadow)}
    nav.pager{margin-top:16px;display:flex;align-items:center;justify-content:space-between}
    .muted{color:var(--muted);font-size:14px}
    footer{margin-top:24px}
    @media print{header.top, nav.pager, .print-hint {display:none !important} .wrap{max-width:700px} .card{box-shadow:none;break-inside:avoid-page;margin:0 0 24px 0}}
  </style>

<style>
/* --- Compact overrides for better fit --- */
.wrap { padding: 12px !important; }
header.top { margin-bottom: 6px !important; }
h1.title { font-size: clamp(18px, 2vw, 26px) !important; }
.card { padding: 18px !important; }
h2.page { font-size: clamp(18px, 2vw, 24px) !important; }
p { font-size: clamp(16px, 1.8vw, 18px) !important; line-height: 1.7 !important; }
button { padding: 8px 12px !important; }
.imgwrap { margin: 4px 0 10px 0 !important; }
  .imgwrap img { max-height: 75vh !important; object-fit: contain !important; }
nav.pager { 
  position: sticky !important; 
  bottom: 0 !important; 
  background: var(--bg) !important; 
  padding-top: 6px !important; 
  padding-bottom: 6px !important; 
  border-top: 1px solid rgba(0,0,0,.06) !important;
}
/* On very short viewports, tighten even more */
@media (max-height: 700px) {
  .wrap { padding: 8px !important; }
  .card { padding: 14px !important; }
  .imgwrap img { max-height: 40vh !important; }
}
</style>

</head>
<body>
  <div class="wrap">
    <header class="top">
      <h1 class="title">üìñ The Three Little Pigs</h1>
      <div class="controls">
        <button id="themeBtn">Toggle theme</button>
        <button id="speakBtn">Read aloud</button>
        <button id="stopBtn">Stop</button>
        <button id="printBtn">Print</button>
      </div>
    </header>

    <div class="card" id="pageCard">
      <div id="pageContent"></div>
    </div>

    <nav class="pager">
      <button id="prevBtn">‚óÄ Back</button>
      <div class="muted" id="pageInfo"></div>
      <button id="nextBtn">Next ‚ñ∂</button>
    </nav>

    <footer class="print-hint muted">
      Tip: Use ‚Üê ‚Üí keys to flip pages. Click Print to export a PDF.
    </footer>
      <!-- Visitor count display -->
      <div class="muted" id="visitorCount"></div>
  </div>

<script>
  const PAGES = [
  {
    "index": 1,
    "text": "On a warm summer morning, a mother duck sat on her nest by the pond, waiting for her eggs to hatch.",
    "images": [
      "Images/UglyDuck_Page1.png"
    ]
  },
  {
    "index": 2,
    "text": "One by one, the eggs began to hatch‚Äîuntil only one large egg was left.",
    "images": [
      "Images/UglyDuck_Page2.png"
    ]
  },
  {
    "index": 3,
    "text": "Finally, the big egg cracked open‚Äîand out came a large, gray, clumsy little bird.",
    "images": [
      "Images/UglyDuck_Page3.png"
    ]
  },
  {
    "index": 4,
    "text": "The other ducklings laughed. ‚ÄúYou don‚Äôt look like us!‚Äù they said.",
    "images": [
      "Images/UglyDuck_Page4.png"
    ]
  },
  {
    "index": 5,
    "text": "Feeling unwanted, the little duckling ran away into the wide, wild world.",
    "images": [
      "Images/UglyDuck_Page5.png"
    ]
  },
  {
    "index": 6,
    "text": "The days grew colder. The duckling watched the bright leaves fall and geese fly away to warmer lands.",
    "images": [
      "Images/UglyDuck_Page6.png"
    ]
  },
  {
    "index": 7,
    "text": "Snow covered the pond. The duckling shivered and hid beneath the reeds.",
    "images": [
      "Images/UglyDuck_Page7.png"
    ]
  },
  {
    "index": 8,
    "text": "At last, the snow melted. The sun grew warm again, and the duckling stretched his wings.",
    "images": [
      "Images/UglyDuck_Page8.png"
    ]
  },
  {
    "index": 9,
    "text": "He looked into the water and saw not a duckling, but a beautiful swan.",
    "images": [
      "Images/UglyDuck_Page9.png"
    ]
  },
  {
    "index": 10,
    "text": "The swans welcomed him. ‚ÄúCome with us,‚Äù they said kindly.",
    "images": [
      "Images/UglyDuck_Page10.png"
    ]
  },
  {
    "index": 11,
    "text": "He spread his wings and felt the wind lift him high. He had never been so happy.",
    "images": [
      "Images/UglyDuck_Page11.png"
    ]
  },
  {
    "index": 12,
    "text": "Now he knew he was beautiful too. And he lived happily ever after.",
    "images": [
      "Images/UglyDuck_Page12.png"
    ]
  }
];

  const pageContent = document.getElementById('pageContent');
  const pageInfo = document.getElementById('pageInfo');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const themeBtn = document.getElementById('themeBtn');
  const speakBtn = document.getElementById('speakBtn');
  const stopBtn = document.getElementById('stopBtn');
  const printBtn = document.getElementById('printBtn');

  let index = 0;
  function el(tag, cls){ const e = document.createElement(tag); if (cls) e.className = cls; return e; }

  function render(){
    const p = PAGES[index];
    pageContent.innerHTML = "";
    const h2 = el('h2','page'); h2.textContent = 'Page ' + p.index; pageContent.appendChild(h2);

    if (p.images && p.images.length){
      p.images.forEach(src => {
        const wrap = el('div','imgwrap');
        const img = el('img');
        img.src = src; img.alt = 'Illustration';
        wrap.appendChild(img); pageContent.appendChild(wrap);
      });
    }
    if (p.text){
      const t = el('p'); t.textContent = p.text; pageContent.appendChild(t);
    }

    pageInfo.textContent = `Page ${index+1} of ${PAGES.length}`;
    prevBtn.disabled = index === 0;
    nextBtn.textContent = index < PAGES.length - 1 ? "Next ‚ñ∂" : "Start Over ‚Üª";
  }

  prevBtn.addEventListener('click', () => { index = Math.max(0, index-1); render(); });
  nextBtn.addEventListener('click', () => { if (index < PAGES.length - 1) index++; else index = 0; render(); });
  window.addEventListener('keydown', (e) => { if (e.key === 'ArrowLeft') prevBtn.click(); if (e.key === 'ArrowRight') nextBtn.click(); });

  themeBtn.addEventListener('click', () => { document.documentElement.classList.toggle('dark'); });

  printBtn.addEventListener('click', () => { window.print(); });

  // Speech
  let speaking = false; let pendingTimer = null;
  function stopSpeech(){ if (!('speechSynthesis' in window)) return; window.speechSynthesis.cancel(); speaking = false; if (pendingTimer){ clearTimeout(pendingTimer); pendingTimer = null; } }
  function speakText(text){
    if (!('speechSynthesis' in window)) return;
    stopSpeech();
    const parts = text.replace(/\\n+/g, ' ').split(/(?<=[.!?])\\s+/).filter(Boolean);
    let i = 0;
    const sayNext = () => {
      if (i >= parts.length){ speaking = false; return; }
      const u = new SpeechSynthesisUtterance(parts[i]); u.rate = 0.96; u.pitch = 1.0; u.onend = () => { pendingTimer = setTimeout(sayNext, 180); };
      speaking = true; window.speechSynthesis.speak(u); i++;
    };
    sayNext();
  }
  speakBtn.addEventListener('click', () => { const p = PAGES[index]; if (p.text) speakText(p.text); });
  stopBtn.addEventListener('click', stopSpeech);

  render();
   function updateVisitorCount() {
      fetch('https://api.countapi.xyz/hit/childrenbook/lrrh')
        .then(res => res.json())
        .then(data => {
          document.getElementById('visitorCount').textContent =
            `Visitors: ${data.value}`;
        });
    }
    updateVisitorCount();
</script>
</body>
</html>
